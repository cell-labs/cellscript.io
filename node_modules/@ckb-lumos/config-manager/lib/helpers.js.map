{"version":3,"file":"helpers.js","names":["findConfigByScript","scriptTemplate","SCRIPTS","scripts","getConfig","Object","values","find","item","CODE_HASH","codeHash","HASH_TYPE","hashType","nameOfScript","foundEntry","entries","config","undefined"],"sources":["../src/helpers.ts"],"sourcesContent":["import { Script } from \"@ckb-lumos/base\";\nimport { ScriptConfig, ScriptConfigs } from \"./types\";\nimport { getConfig } from \"./manager\";\n\ntype ScriptTemplate = Omit<Script, \"args\">;\n\nexport function findConfigByScript(\n  scriptTemplate: ScriptTemplate,\n  SCRIPTS?: ScriptConfigs\n): ScriptConfig | undefined {\n  const scripts = SCRIPTS || getConfig().SCRIPTS;\n\n  return Object.values(scripts).find(\n    (item) =>\n      item?.CODE_HASH === scriptTemplate.codeHash &&\n      item?.HASH_TYPE === scriptTemplate.hashType\n  );\n}\n\n/**\n *\n * We may need to determine if a `scriptTemplate` is a kind of ScriptConfig\n *\n * ```typescript\n * if (keyOfScript({ codeHash... })  === 'SECP256K1')  {\n *   // ...\n * }\n * ```\n * @param scriptTemplate\n * @param SCRIPTS\n */\nexport function nameOfScript<S extends ScriptConfigs>(\n  scriptTemplate: ScriptTemplate,\n  SCRIPTS?: ScriptConfigs\n): keyof S | undefined {\n  const scripts = SCRIPTS || getConfig().SCRIPTS;\n\n  const foundEntry = Object.entries(scripts).find(\n    ([, config]) =>\n      config?.CODE_HASH === scriptTemplate.codeHash &&\n      config?.HASH_TYPE === scriptTemplate.hashType\n  );\n\n  if (!foundEntry) return undefined;\n  return foundEntry[0];\n}\n"],"mappings":";;;;;;;;AAEA;;AAIO,SAASA,kBAAT,CACLC,cADK,EAELC,OAFK,EAGqB;EAC1B,MAAMC,OAAO,GAAGD,OAAO,IAAI,IAAAE,kBAAA,IAAYF,OAAvC;EAEA,OAAOG,MAAM,CAACC,MAAP,CAAcH,OAAd,EAAuBI,IAAvB,CACJC,IAAD,IACE,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEC,SAAN,MAAoBR,cAAc,CAACS,QAAnC,IACA,CAAAF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEG,SAAN,MAAoBV,cAAc,CAACW,QAHhC,CAAP;AAKD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASC,YAAT,CACLZ,cADK,EAELC,OAFK,EAGgB;EACrB,MAAMC,OAAO,GAAGD,OAAO,IAAI,IAAAE,kBAAA,IAAYF,OAAvC;EAEA,MAAMY,UAAU,GAAGT,MAAM,CAACU,OAAP,CAAeZ,OAAf,EAAwBI,IAAxB,CACjB,CAAC,GAAGS,MAAH,CAAD,KACE,CAAAA,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEP,SAAR,MAAsBR,cAAc,CAACS,QAArC,IACA,CAAAM,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEL,SAAR,MAAsBV,cAAc,CAACW,QAHtB,CAAnB;EAMA,IAAI,CAACE,UAAL,EAAiB,OAAOG,SAAP;EACjB,OAAOH,UAAU,CAAC,CAAD,CAAjB;AACD"}