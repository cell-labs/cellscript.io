{"version":3,"file":"xpub_store.js","names":["XPubStore","constructor","accountExtendedPublicKey","toAccountExtendedPublicKey","save","path","overwrite","fs","existsSync","Error","writeFileSync","toJson","JSON","stringify","xpubkey","serialize","slice","load","json","readFileSync","xpub","parse","AccountExtendedPublicKey"],"sources":["../src/xpub_store.ts"],"sourcesContent":["import { AccountExtendedPublicKey } from \"./extended_key\";\nimport fs from \"fs\";\n\nexport class XPubStore {\n  private accountExtendedPublicKey: AccountExtendedPublicKey;\n\n  constructor(accountExtendedPublicKey: AccountExtendedPublicKey) {\n    this.accountExtendedPublicKey = accountExtendedPublicKey;\n  }\n\n  toAccountExtendedPublicKey(): AccountExtendedPublicKey {\n    return this.accountExtendedPublicKey;\n  }\n\n  save(\n    path: string,\n    {\n      overwrite = false,\n    }: {\n      overwrite?: boolean;\n    } = {}\n  ) {\n    if (!overwrite && fs.existsSync(path)) {\n      throw new Error(\"XPub file already exists!\");\n    }\n    fs.writeFileSync(path, this.toJson());\n  }\n\n  toJson(): string {\n    return JSON.stringify({\n      xpubkey: this.accountExtendedPublicKey.serialize().slice(2),\n    });\n  }\n\n  static load(path: string): XPubStore {\n    const json = fs.readFileSync(path, \"utf-8\");\n    const xpub = JSON.parse(json).xpubkey;\n    const accountExtendedPublicKey = AccountExtendedPublicKey.parse(\n      \"0x\" + xpub\n    );\n    return new XPubStore(accountExtendedPublicKey);\n  }\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEO,MAAMA,SAAN,CAAgB;EAGrBC,WAAW,CAACC,wBAAD,EAAqD;IAC9D,KAAKA,wBAAL,GAAgCA,wBAAhC;EACD;;EAEDC,0BAA0B,GAA6B;IACrD,OAAO,KAAKD,wBAAZ;EACD;;EAEDE,IAAI,CACFC,IADE,EAEF;IACEC,SAAS,GAAG;EADd,IAII,EANF,EAOF;IACA,IAAI,CAACA,SAAD,IAAcC,WAAA,CAAGC,UAAH,CAAcH,IAAd,CAAlB,EAAuC;MACrC,MAAM,IAAII,KAAJ,CAAU,2BAAV,CAAN;IACD;;IACDF,WAAA,CAAGG,aAAH,CAAiBL,IAAjB,EAAuB,KAAKM,MAAL,EAAvB;EACD;;EAEDA,MAAM,GAAW;IACf,OAAOC,IAAI,CAACC,SAAL,CAAe;MACpBC,OAAO,EAAE,KAAKZ,wBAAL,CAA8Ba,SAA9B,GAA0CC,KAA1C,CAAgD,CAAhD;IADW,CAAf,CAAP;EAGD;;EAEU,OAAJC,IAAI,CAACZ,IAAD,EAA0B;IACnC,MAAMa,IAAI,GAAGX,WAAA,CAAGY,YAAH,CAAgBd,IAAhB,EAAsB,OAAtB,CAAb;;IACA,MAAMe,IAAI,GAAGR,IAAI,CAACS,KAAL,CAAWH,IAAX,EAAiBJ,OAA9B;;IACA,MAAMZ,wBAAwB,GAAGoB,sCAAA,CAAyBD,KAAzB,CAC/B,OAAOD,IADwB,CAAjC;;IAGA,OAAO,IAAIpB,SAAJ,CAAcE,wBAAd,CAAP;EACD;;AAtCoB"}