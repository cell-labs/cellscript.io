{"version":3,"file":"values.js","names":["hexify","bytes","Value","constructor","buffer","equals","other","hashCode","xxHash32","Buffer","from","hash","ckbHash","ScriptValue","script","_options","blockchain","Script","pack","OutPointValue","outPoint","OutPoint","RawTransactionValue","rawTransaction","RawTransaction","TransactionValue","transaction","Transaction"],"sources":["../src/values.ts"],"sourcesContent":["// This module provides a ValueObject implementation for CKB related data\n// structures to allow seamless immutable.js integration.\nimport { xxHash32 } from \"js-xxhash\";\nimport { ckbHash } from \"./utils\";\nimport { bytes } from \"@ckb-lumos/codec\";\nimport * as blockchain from \"./blockchain\";\nimport { OutPoint, RawTransaction, Script, Transaction } from \"./api\";\nimport { Hash } from \"./primitive\";\n\nconst { hexify } = bytes;\nclass Value {\n  constructor(private buffer: Uint8Array) {}\n\n  equals(other: Value): boolean {\n    return hexify(this.buffer) === hexify(other.buffer);\n  }\n\n  hashCode(): number {\n    return xxHash32(Buffer.from(this.buffer), 0);\n  }\n\n  hash(): Hash {\n    return ckbHash(this.buffer);\n  }\n}\n\nclass ScriptValue extends Value {\n  /**\n   * @param script\n   * @param _options @deprecated this parameter is unused and takes no effect, please remove it.\n   */\n  constructor(script: Script, _options: { validate?: boolean } = {}) {\n    super(blockchain.Script.pack(script));\n  }\n}\n\nclass OutPointValue extends Value {\n  /**\n   * @param outPoint\n   * @param _options @deprecated this parameter is unused and takes no effect, please remove it.\n   */\n  constructor(outPoint: OutPoint, _options: { validate?: boolean } = {}) {\n    super(blockchain.OutPoint.pack(outPoint));\n  }\n}\n\nclass RawTransactionValue extends Value {\n  /**\n   * @param rawTransaction\n   * @param _options @deprecated this parameter is unused and takes no effect, please remove it.\n   */\n  constructor(\n    rawTransaction: RawTransaction,\n    _options: { validate?: boolean } = {}\n  ) {\n    super(blockchain.RawTransaction.pack(rawTransaction));\n  }\n}\n\nclass TransactionValue extends Value {\n  /**\n   * @param transaction\n   * @param _options @deprecated this parameter is unused and takes no effect, please remove it.\n   */\n  constructor(transaction: Transaction, _options: { validate?: boolean } = {}) {\n    super(blockchain.Transaction.pack(transaction));\n  }\n}\n\nexport { ScriptValue, OutPointValue, RawTransactionValue, TransactionValue };\n"],"mappings":";;;;;;;AAEA;;AACA;;AACA;;AACA;;;;;;AALA;AACA;AAQA,MAAM;EAAEA;AAAF,IAAaC,YAAnB;;AACA,MAAMC,KAAN,CAAY;EACVC,WAAW,CAASC,MAAT,EAA6B;IAAA,KAApBA,MAAoB,GAApBA,MAAoB;EAAE;;EAE1CC,MAAM,CAACC,KAAD,EAAwB;IAC5B,OAAON,MAAM,CAAC,KAAKI,MAAN,CAAN,KAAwBJ,MAAM,CAACM,KAAK,CAACF,MAAP,CAArC;EACD;;EAEDG,QAAQ,GAAW;IACjB,OAAO,IAAAC,kBAAA,EAASC,MAAM,CAACC,IAAP,CAAY,KAAKN,MAAjB,CAAT,EAAmC,CAAnC,CAAP;EACD;;EAEDO,IAAI,GAAS;IACX,OAAO,IAAAC,cAAA,EAAQ,KAAKR,MAAb,CAAP;EACD;;AAbS;;AAgBZ,MAAMS,WAAN,SAA0BX,KAA1B,CAAgC;EAC9B;AACF;AACA;AACA;EACEC,WAAW,CAACW,MAAD,EAAiBC,QAAgC,GAAG,EAApD,EAAwD;IACjE,MAAMC,UAAU,CAACC,MAAX,CAAkBC,IAAlB,CAAuBJ,MAAvB,CAAN;EACD;;AAP6B;;;;AAUhC,MAAMK,aAAN,SAA4BjB,KAA5B,CAAkC;EAChC;AACF;AACA;AACA;EACEC,WAAW,CAACiB,QAAD,EAAqBL,QAAgC,GAAG,EAAxD,EAA4D;IACrE,MAAMC,UAAU,CAACK,QAAX,CAAoBH,IAApB,CAAyBE,QAAzB,CAAN;EACD;;AAP+B;;;;AAUlC,MAAME,mBAAN,SAAkCpB,KAAlC,CAAwC;EACtC;AACF;AACA;AACA;EACEC,WAAW,CACToB,cADS,EAETR,QAAgC,GAAG,EAF1B,EAGT;IACA,MAAMC,UAAU,CAACQ,cAAX,CAA0BN,IAA1B,CAA+BK,cAA/B,CAAN;EACD;;AAVqC;;;;AAaxC,MAAME,gBAAN,SAA+BvB,KAA/B,CAAqC;EACnC;AACF;AACA;AACA;EACEC,WAAW,CAACuB,WAAD,EAA2BX,QAAgC,GAAG,EAA9D,EAAkE;IAC3E,MAAMC,UAAU,CAACW,WAAX,CAAuBT,IAAvB,CAA4BQ,WAA5B,CAAN;EACD;;AAPkC"}